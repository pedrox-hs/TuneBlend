subprojects {
    def jvmVersion = libs.versions.jdk.get()

    tasks.withType(JavaCompile).configureEach { JavaCompile task ->
        task.sourceCompatibility = jvmVersion
        task.targetCompatibility = jvmVersion
    }
}

tasks.register('testJvmUnitTest') {
    description = 'Run tests in JVM modules'
    group = JavaBasePlugin.VERIFICATION_GROUP

    dependsOn provider {
        tasks.matching {
            it instanceof Test && it.name == 'test'
        }
    }
}
